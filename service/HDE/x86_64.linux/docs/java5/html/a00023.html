<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.3.1"/>
<title>OpenSplice Java 5 DCPS: Durability QoS</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="PROJECT_LOGO_OpenSplice.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">OpenSplice Java 5 DCPS
   &#160;<span id="projectnumber">v6.x</span>
   </div>
   <div id="projectbrief">OpenSplice Java 5 OpenSplice Data Distribution Service Data-Centric Publish-Subscribe API</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.3.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Packages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('a00023.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Durability QoS </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>This QosPolicy controls whether the data should be stored for late joining readers.</p>
<h2>Attributes</h2>
<table class="doxtable">
<tr>
<th>Value </th><th>Meaning </th><th>Concerns </th><th>RxO </th><th>Changeable  </th></tr>
<tr>
<td>A DurabilityQosPolicyKind:<br/>
 kind  </td><td>Specifies the type of durability from VOLATILE_DURABILITY_QOS (short life) to PERSISTENT_DURABILITY_QOS (long life).  </td><td rowspan="5"><a class="el" href="a00019.html">Topic</a>, <a class="el" href="a00016.html">DataReader</a>, <a class="el" href="a00013.html">DataWriter</a>  </td><td rowspan="5">Yes </td><td rowspan="5">No  </td></tr>
<tr>
<td>VOLATILE  </td><td>The Data Distribution Service does not need to keep any samples of data-instances on behalf of any <a class="el" href="a00016.html">DataReader</a> that is not known by the <a class="el" href="a00013.html">DataWriter</a> at the time the instance is written. In other words the Data Distribution Service will only attempt to provide the data to existing subscribers. This is the default kind.   </td></tr>
<tr>
<td>TRANSIENT_LOCAL  </td><td>Currently behaves identically to the Transient Qos, except for its RxO properties. The desired behaviour of TransientLocal can be achieved from the Transient Qos with the default (true) setting of the AutodisposeUnregisteredInstances flag on the <a class="el" href="a00016.html">DataReader</a> and the ServiceCleanupDelay set to 0 on the durability service. This is because for TransientLocal, the data should only remain available for late-joining readers during the lifetime of its source writer, so it is not required to survive after its source writer has been deleted. Since the deletion of a writer implicitly unregisters all its instances, an AutodisposeUnregisteredInstances value of true will also dispose the affected data from the durability store, and thus prevent it from remaining available to late joining readers.   </td></tr>
<tr>
<td>TRANSIENT  </td><td>Some samples are available to late-joining DataReaders (stored in memory). This means that the late-joining DataReaders are able to read these previously written samples. The <a class="el" href="a00016.html">DataReader</a> does not necessarily have to exist at the time of writing. Not all samples are stored (depending on QosPolicy <a class="el" href="a00027.html">History</a> and QosPolicy <a class="el" href="a00039.html">ResourceLimits</a>). The storage does not depend on the <a class="el" href="a00013.html">DataWriter</a> and will outlive the DataWriter. This may be used to implement reallocation of applications because the data is saved in the Data Distribution Service (not in the DataWriter). This setting is typically used for state related information of an application. In this case also the <a class="el" href="a00024.html">DurabilityService</a> QosPolicy settings are relevant for the behaviour of the Data Distribution Service.   </td></tr>
<tr>
<td>PERSISTENT  </td><td>The data is stored in permanent storage (e.g. hard disk). This means that the samples are also available after a system restart. The samples not only outlives the DataWriters, but even the Data Distribution Service and the system. This setting is typically used for attributes and settings for an application or the system. In this case also the <a class="el" href="a00024.html">DurabilityService</a> QosPolicy settings are relevant for the behaviour of the Data Distribution Service.   </td></tr>
</table>
<p>The decoupling between <a class="el" href="a00016.html">DataReader</a> and <a class="el" href="a00013.html">DataWriter</a> offered by the Publish/Subscribe paradigm allows an application to write data even if there are no current readers on the network. Moreover, a <a class="el" href="a00016.html">DataReader</a> that joins the network after some data has been written could potentially be interested in accessing the most current values of the data as well as potentially some history.</p>
<p>This QoS policy controls whether the Data Distribution Service will actually make data available to late-joining readers. Note that although related, this does not strictly control what data the Service will maintain internally. That is, the Data Distribution Service may choose to maintain some data for its own purposes (e.g., flow control) and yet not make it available to late-joining readers if the DURABILITY QoS policy is set to VOLATILE.</p>
<p>The value offered is considered compatible with the value requested if and only if the inequality “offered kind &gt;= requested kind evaluates to ‘TRUE.’ For the purposes of this inequality, the values of DURABILITY kind are considered ordered such that VOLATILE &lt; TRANSIENT_LOCAL &lt; TRANSIENT &lt; PERSISTENT.</p>
<p>For the purpose of implementing the DURABILITY QoS kind TRANSIENT or PERSISTENT, the service behaves “as if” for each <a class="el" href="a00019.html">Topic</a> that has TRANSIENT or PERSISTENT DURABILITY kind there was a corresponding “built-in” <a class="el" href="a00016.html">DataReader</a> and <a class="el" href="a00013.html">DataWriter</a> configured to have the same DURABILITY kind. In other words, it is “as if” somewhere in the system (possibly on a remote node) there was a “built-in durability <a class="el" href="a00016.html">DataReader</a>” that subscribed to that <a class="el" href="a00019.html">Topic</a> and a “built-in durability <a class="el" href="a00013.html">DataWriter</a>” that published that <a class="el" href="a00019.html">Topic</a> as needed for the new subscribers that join the system.</p>
<p>For each <a class="el" href="a00019.html">Topic</a>, the built-in fictitious “persistence service” <a class="el" href="a00016.html">DataReader</a> and <a class="el" href="a00013.html">DataWriter</a> has its QoS configured from the <a class="el" href="a00019.html">Topic</a> QoS of the corresponding <a class="el" href="a00019.html">Topic</a>. In other words, it is “as-if” the service first did find_topic to access the <a class="el" href="a00019.html">Topic</a>, and then used the QoS from the <a class="el" href="a00019.html">Topic</a> to configure the fictitious built-in entities. A consequence of this model is that the transient or persistence serviced can be configured by means of setting the proper QoS on the <a class="el" href="a00019.html">Topic</a>. For a given <a class="el" href="a00019.html">Topic</a>, the usual request/offered semantics apply to the matching between any <a class="el" href="a00013.html">DataWriter</a> in the system that writes the <a class="el" href="a00019.html">Topic</a> and the built-in transient/persistent <a class="el" href="a00016.html">DataReader</a> for that <a class="el" href="a00019.html">Topic</a>; similarly for the built-in transient/persistent <a class="el" href="a00013.html">DataWriter</a> for a <a class="el" href="a00019.html">Topic</a> and any <a class="el" href="a00016.html">DataReader</a> for the <a class="el" href="a00019.html">Topic</a>. As a consequence, a <a class="el" href="a00013.html">DataWriter</a> that has an incompatible QoS with respect to what the <a class="el" href="a00019.html">Topic</a> specified will not send its data to the transient/persistent service, and a <a class="el" href="a00016.html">DataReader</a> that has an incompatible QoS with respect to the specified in the <a class="el" href="a00019.html">Topic</a> will not get data from it. Incompatibilities between local <a class="el" href="a00016.html">DataReader</a>/<a class="el" href="a00013.html">DataWriter</a> entities and the corresponding fictitious “built-in transient/persistent entities” cause the REQUESTED_INCOMPATIBLE_QOS/OFFERED_INCOMPATIBLE_QOS status to change and the corresponding Listener invocations and/or signalling of Condition and WaitSet objects as they would with non-fictitious entities.</p>
<p>The setting of the service_cleanup_delay controls when the TRANSIENT or PERSISTENT service is able to remove all information regarding a data-instances. Information on a data-instances is maintained until the following conditions are met:</p>
<ol type="1">
<li>the instance has been explicitly disposed (instance_state = NOT_ALIVE_DISPOSED),</li>
<li>and while in the NOT_ALIVE_DISPOSED state the system detects that there are no more “live” <a class="el" href="a00013.html">DataWriter</a> entities writing the instance, that is, all existing writers either unregister the instance (call unregister) or lose their liveliness,</li>
<li>and a time interval longer that service_cleanup_delay has elapsed since the moment the service detected that the previous two conditions were met.</li>
</ol>
<p>The utility of the service_cleanup_delay is apparent in the situation where an application disposes an instance and it crashes before it has a chance to complete additional tasks related to the disposition. Upon restart the application may ask for initial data to regain its state and the delay introduced by the service_cleanup_delay will allow the restarted application to receive the information on the disposed instance and complete the interrupted tasks.</p>
<p>This QoS plays a role within the scope of <a class="el" href="a00005.html">Eventual Consistency</a> </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="a00004.html">DCPS Concepts</a></li><li class="navelem"><a class="el" href="a00020.html">Supported Quality of Service (QoS)</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.3.1 </li>
  </ul>
</div>
</body>
</html>
