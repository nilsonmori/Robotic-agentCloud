<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.3.1"/>
<title>OpenSplice ISO C++ 2 DCPS: Queries and Filters</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="PROJECT_LOGO_OpenSplice.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">OpenSplice ISO C++ 2 DCPS
   &#160;<span id="projectnumber">v6.x</span>
   </div>
   <div id="projectbrief">ISO C++ 2 OpenSplice Data Distribution Service Data-Centric Publish-Subscribe API</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.3.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('a00051.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(11)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Queries and Filters </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>A subset of SQL syntax is used in several parts of OpenSplice:</p>
<ul>
<li>the filter_expression in the ContentFilteredTopic</li>
<li>the topic_expression in the MultiTopic</li>
<li>the query_expression in the QueryReadCondition.</li>
</ul>
<p>Those expressions may use a subset of SQL, extended with the possibility to use program variables in the SQL expression. The allowed SQL expressions are defined with the BNF-grammar below. The following notational conventions are made:</p>
<ul>
<li>the NonTerminals are typeset in italics</li>
<li>the ‘Terminals’ are quoted and typeset in a fixed width font</li>
<li>the TOKENS are typeset in small caps</li>
<li>the notation (element // ‘,’) represents a non-empty comma-separated list of elements.</li>
</ul>
<h3>SQL Grammar in BNF</h3>
<p>Expression::= FilterExpression<br/>
 &#160;&#160;&#160;&#160;| TopicExpression<br/>
 &#160;&#160;&#160;&#160;| QueryExpression</p>
<p>FilterExpression::= Condition</p>
<p>TopicExpression::= SelectFrom {Where } ‘;’</p>
<p>QueryExpression::= {Condition}{‘ORDER BY’ (FIELDNAME // ‘,’) }</p>
<p>SelectFrom::= ‘SELECT’ Aggregation ‘FROM’ Selection</p>
<p>Aggregation::= ‘*’<br/>
 &#160;&#160;&#160;&#160;| (SubjectFieldSpec // ‘,’)</p>
<p>SubjectFieldSpec::= FIELDNAME<br/>
 &#160;&#160;&#160;&#160;| FIELDNAME ‘AS’ FIELDNAME<br/>
 &#160;&#160;&#160;&#160;| FIELDNAME FIELDNAME</p>
<p>Selection::= TOPICNAME<br/>
 &#160;&#160;&#160;&#160;| TOPICTNAME NaturalJoin JoinItem</p>
<p>JoinItem::= TOPICNAME<br/>
 &#160;&#160;&#160;&#160;| TOPICNAME NaturalJoin JoinItem<br/>
 &#160;&#160;&#160;&#160;| ‘(’ TOPICNAME NaturalJoin JoinItem ‘)’</p>
<p>NaturalJoin::= ‘INNER NATURAL JOIN’<br/>
 &#160;&#160;&#160;&#160;| ‘NATURAL JOIN’<br/>
 &#160;&#160;&#160;&#160;| ‘NATURAL INNER JOIN’</p>
<p>Where::= ‘WHERE’ Condition</p>
<p>Condition::= Predicate<br/>
 &#160;&#160;&#160;&#160;| Condition ‘AND’ Condition<br/>
 &#160;&#160;&#160;&#160;| Condition ‘OR’ Condition<br/>
 &#160;&#160;&#160;&#160;| ‘NOT’ Condition<br/>
 &#160;&#160;&#160;&#160;| ‘(’ Condition ‘)’</p>
<p>Predicate::= ComparisonPredicate<br/>
 &#160;&#160;&#160;&#160;| BetweenPredicate</p>
<p>ComparisonPredicate::= FIELDNAME RelOp Parameter<br/>
 &#160;&#160;&#160;&#160;| Parameter RelOp FIELDNAME</p>
<p>BetweenPredicate::= FIELDNAME ‘BETWEEN’ Range<br/>
 &#160;&#160;&#160;&#160;| FIELDNAME ‘NOT BETWEEN’ Range</p>
<p>RelOp::= ‘=’ | ‘&gt;’ | ‘&gt;=’ | ‘&lt;’ | ‘&lt;=’ | ‘&lt;&gt;’ | like</p>
<p>Range::= Parameter ‘AND’ Parameter</p>
<p>Parameter::= INTEGERVALUE<br/>
 &#160;&#160;&#160;&#160;| FLOATVALUE<br/>
 &#160;&#160;&#160;&#160;| STRING<br/>
 &#160;&#160;&#160;&#160;| ENUMERATEDVALUE<br/>
 &#160;&#160;&#160;&#160;| PARAMETER</p>
<p>Note: INNER NATURAL JOIN, NATURAL JOIN, and NATURAL INNER JOIN are all aliases, in the sense that they have the same semantics. The aliases are all supported because they all are part of the SQL standard.</p>
<h3>SQL Token Expression</h3>
<p>The syntax and meaning of the tokens used in the SQL grammar is described as follows:</p>
<ul>
<li>FIELDNAME - A fieldname is a reference to a field in the data-structure. The dot ‘.’ is used to navigate through nested structures. The number of dots that may be used in a fieldname is unlimited. The field-name can refer to fields at any depth in the data structure. The names of the field are those specified in the IDL definition of the corresponding structure, which may or may not match the field names that appear on the C mapping of the structure</li>
</ul>
<ul>
<li>TOPICNAME - A topic name is an identifier for a topic, and is defined as any series of characters ‘a’, ..., ‘z’, ‘A’, ..., ‘Z’, ‘0’, ..., ‘9’, ‘_’ but may not start with a digit</li>
</ul>
<ul>
<li>INTEGERVALUE - Any series of digits, optionally preceded by a plus or minus sign, representing a decimal integer value within the range of the system. A hexadecimal number is preceded by 0x and must be a valid hexadecimal expression</li>
</ul>
<ul>
<li>FLOATVALUE - Any series of digits, optionally preceded by a plus or minus sign and optionally including a floating point (‘.’). A power-of-ten expression may be post-fixed, which has the syntax en, where n is a number, optionally preceded by a plus or minus sign</li>
</ul>
<ul>
<li>STRING - Any series of characters encapsulated in single quotes, except a new-line character or a right quote. A string starts with a left or right quote, but ends with a right quote</li>
</ul>
<ul>
<li>ENUMERATEDVALUE - An enumerated value is a reference to a value declared within an enumeration. The name of the value must correspond to the names specified in the IDL definition of the enumeration, and must be encapsulated in single quotes. An enum value starts with a left or right quote, but ends with a right quote.</li>
</ul>
<ul>
<li>PARAMETER - A parameter is of the form n, where n represents a natural number (zero included) smaller than 100. It refers to the n + 1th argument in the given context.</li>
</ul>
<p>Note: when RelOp is ‘like’, Unix filename wildcards must be used for strings instead of the normal SQL wildcards. This means any one character is ‘?’, any zero or more characters is ‘*’</p>
<h3>SQL Examples</h3>
<p>Assuming Topic “Location” has as an associated type a structure with fields “flight_name, x, y, z”, and Topic “FlightPlan” has as fields “flight_id, source, destination”. The following are examples of using these expressions.</p>
<p>Example of a topic_expression:<br/>
 &#160;&#160;SELECT flight_name, x, y, z AS height FROM ‘Location’ NATURAL JOIN ‘FlightPlan’ WHERE height &lt; 1000 AND x &lt; 23</p>
<p>Example of a query_expression or a filter_expression:<br/>
 &#160;&#160;height &lt; 1000 AND x &lt;23 </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="a00006.html">DCPS Concepts</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.3.1 </li>
  </ul>
</div>
</body>
</html>
